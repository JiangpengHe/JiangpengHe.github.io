---
---

{% assign entry = include.entry %}

<div class="row">
  {% if site.enable_publication_thumbnails %}
    <div class="col-sm-2 {% if entry.preview %}preview{% else %}abbr{% endif %}">
      {% if entry.preview %}
        {% if entry.preview contains '://' %}
          <img class="preview z-depth-1 rounded" src="{{ entry.preview }}">
        {% else %}
          {% assign entry_path = entry.preview | prepend: '/assets/img/publication_preview/' %}
          {% include figure.liquid loading="eager" path=entry_path sizes="200px" class="preview z-depth-1 rounded" zoomable=false alt=entry.preview %}
        {% endif %}
      {% elsif entry.abbr %}
        {% if site.data.venues[entry.abbr] %}
          {% assign venue_style = site.data.venues[entry.abbr].color | prepend: 'style="background-color:' | append: ';"' %}
          <abbr class="badge" {% if venue_style %}{{ venue_style }}{% endif %}>
            <a href="{{ site.data.venues[entry.abbr].url }}">{{ entry.abbr }}</a>
          </abbr>
        {% else %}
          <abbr class="badge">{{ entry.abbr }}</abbr>
        {% endif %}
      {% endif %}
    </div>
  {% endif %}

  <div id="{{ entry.key }}" class="{% if site.enable_publication_thumbnails %}col-sm-8{% else %}col-sm-10{% endif %}">
    <div class="title">{{ entry.title }}</div>
    <div class="author">
      {% for author in entry.author_array %}
        {%- if forloop.length > 1 -%}
          {%- if forloop.first == false -%}, {% endif -%}
          {%- if forloop.last -%} and {% endif -%}
        {%- endif -%}
        {%- assign author_is_self = false -%}
        {%- if author.last == site.scholar.last_name and author.first contains site.scholar.first_name -%}
          {%- assign author_is_self = true -%}
        {%- endif -%}
        {% assign coauthor_url = site.data.coauthors | where: "last_name", author.last | where: "first_name", author.first | map: "url" | first %}
        {% if author_is_self %}
          <em>{{ author.first }} {{ author.last }}</em>
        {% elsif coauthor_url %}
          <a href="{{ coauthor_url }}">{{ author.first }} {{ author.last }}</a>
        {% else %}
          {{ author.first }} {{ author.last }}
        {% endif %}
        {%- if author.last == entry.corresponding_author -%}<sup>&#9993;</sup>{%- endif -%}
      {% endfor %}
    </div>

    <div class="periodical">
      {% if entry.type == "article" %}
        <em>{{ entry.journal }}</em>
      {% elsif entry.type == "inproceedings" %}
        <em>In {{ entry.booktitle }}</em>
      {% endif %}
      {% if entry.year %}
        {{ entry.year }}
      {% endif %}
    </div>

    <div class="links">
      {% if entry.abstract %}
        <a class="abstract btn btn-sm z-depth-0" role="button">Abs</a>
      {% endif %}
      {% if entry.arxiv %}
        <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="btn btn-sm z-depth-0" role="button">arXiv</a>
      {% endif %}
      {% if entry.bibtex_show %}
        <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a>
      {% endif %}
      {% if entry.html %}
        <a href="{{ entry.html }}" class="btn btn-sm z-depth-0" role="button">HTML</a>
      {% endif %}
      {% if entry.pdf %}
        {% if entry.pdf contains '://' %}
          <a href="{{ entry.pdf }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
        {% else %}
          <a href="{{ entry.pdf | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
        {% endif %}
      {% endif %}
      {% if entry.supp %}
        {% if entry.supp contains '://' %}
          <a href="{{ entry.supp }}" class="btn btn-sm z-depth-0" role="button">Supp</a>
        {% else %}
          <a href="{{ entry.supp | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Supp</a>
        {% endif %}
      {% endif %}
      {% if entry.blog %}
        <a href="{{ entry.blog }}" class="btn btn-sm z-depth-0" role="button">Blog</a>
      {% endif %}
      {% if entry.code %}
        <a href="{{ entry.code }}" class="btn btn-sm z-depth-0" role="button">Code</a>
      {% endif %}
      {% if entry.poster %}
        {% if entry.poster contains '://' %}
          <a href="{{ entry.poster }}" class="btn btn-sm z-depth-0" role="button">Poster</a>
        {% else %}
          <a href="{{ entry.poster | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Poster</a>
        {% endif %}
      {% endif %}
      {% if entry.slides %}
        {% if entry.slides contains '://' %}
          <a href="{{ entry.slides }}" class="btn btn-sm z-depth-0" role="button">Slides</a>
        {% else %}
          <a href="{{ entry.slides | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Slides</a>
        {% endif %}
      {% endif %}
      {% if entry.website %}
        <a href="{{ entry.website }}" class="btn btn-sm z-depth-0" role="button">Website</a>
      {% endif %}
    </div>

    {% if entry.abstract %}
    <div class="abstract hidden">
      <p>{{ entry.abstract }}</p>
    </div>
    {% endif %}

    {% if entry.bibtex_show %}
    <div class="bibtex hidden">
      {% highlight bibtex %}{{ entry.bibtex | hideCustomBibtex }}{% endhighlight %}
    </div>
    {% endif %}
  </div>
</div>
